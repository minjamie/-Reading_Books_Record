# Chapter 4: 데이터를 모델링한다는 것

## 📌 디멘션 모델링, 데이터의 관점을 읽어 모델링하다.

#### 📚 다양한 관점에서 본 상품 판매량

> 표를 보면 각 셀의 값을 결정하는 데 지역, 상품, 기간 3가재 정보가 영향을 주었다.
> 판매량을 집계하는 **기준**이 존재하는 데 표의 87 값은 상품 B1이 강원도 원주시에서 2014년 한 해동안 87개 판매되었다는 **사실**을 나타낸다.
> 즉, 87은 위 3가지 **관점(디멘션)**이 결합된 값을 의미한다.

87이라는 값이 정보로서 비즈니스쟉인 가치를 가지려면 그 값을 해석하는 맥락이 명확해야한다. 따라서 데이터 모델링에서 맥락은 중요한 기준 정보로서 모델의 구조를 지배한다.

판매량이라는 팩트, 사실 값과 이 값을 정의하는 데 필요한 3가지 표현 방식, 디멘션(차원) X,Y,Z의 좌표로 모형화되어 각 디멘션은 팩트를 표현하는 하나의 관점이된다.

이처럼 **디멘션은 팩트를 그륩화하거나 한정화(필터링)하는 목적**으로 사용될 수 있다.

일반적으로 디멘션 혹은 그륩핑을 위한 논리적인 계층구조는 1:N 형태의 엔터티 간 부보-자식관계를 만든다
팩트를 규정하는 개별 디멘션은 각각의 테이블로 만들어져 팩트 테이블의 상위 테이블이 되어야하며, 디멘션 내의 계층구조를 표현하려면 각 디멘션은 다시 상 하위 테이블로 분리되어야한다.

팩트 테이블인<판매>는 각 디멘션 테이블의 각 기본키(PK)를 외래(FK)로 하여 서로 관계로 연결된 하위 테이블로 만들어진다.

-디멘션과 팩트의 관계, 데이터 모델에서 부모-자식 관계로 어떻게 구현되는지 이해 -디멘션이 팩트를 결정하는 기준 정보로서 부모 역할을 하게 되는 것, 어떤 팩트를 결정하는 유형과 개념은 반드시 그 팩트의 상위로 올라가야야 함을 이해하는게 중요 -데이터를 모델링한다는 건 이처럼 데이터를 이해하고 유형화하고 구조화하는 과정이다. 데이터에는 본질을 기준으로 한 몇 가지 유형이 존재한다.
또 데이터 간에는 종속 관계와 계층 관계도 있음을 앞으로 학슴하여 데이터 저장 구조를 최적하는 방법론의 핵심에 다가간다.

>

## 📌 OLTP와 OLAP의 서로 다른 세계, 그리고 데이터 모델링의 목표

다음의 데이터를 성격과 목적에 따라 두분류로 구분해보자

온라인에서 이루어진 트랙잭션을 데이터베이스에 저장한 거래 처리 데이터
이미 데이터 베이스에 저장된 거래 데이터를 가공한 분석 정보
거래 처리 영역과 분석 정보 영역은 본질적으로 다른 목적을 가진다
거래 처리 영역은 비즈니스 활동 자체를 지원한다. 반면 분석 정보 영역은 비즈니스 활동에 대한 측정, 평가, 분석,예측, 개선등을 지원한다

데이터는 성격과 목적에 따라 1>거래 처리 데이터와 2>분석 정보 데이터로 나뉘며 각각을 별도의 영역에서 관리한다는 사실과 그 이유

- 거래 처리 영역을 OLTP, on-line transaction processing이라 하고 OLTP에 저장된 운영 데이터를 통합하고 변환하여 분석정보를 생성하는 영역을 OLAP, on-line Analyical Processing라 한다.
- 통상적으로 OLAP은 DBMS나 OLAP 애플리케이션 같은 정보 분석 도구를 의미하는 용어로 많이 사용되며 OLTP에 대응되는 개념으로 데이터웨어하우스(DW)라는 용어를 흔히 사용한다. DW 역시 분석 정보를 위한 통한 영역으로서의 데이터베이스를 의미하는 컬러가 강해 거래 처리에 대응되는 개념으로서 분석영역을 의미하는 용어로 OLAP가 더자연스럽다.

#### 주목할 건 OLTP와 OLAP이 지향하는 목표가 극명하게 다르다는 것이다.

두 영역에서 데이터의 발생과 관리 단위, 성격, 종류와 수명 주기뿐 아니라 사용되는 질의의 형태가 완전히 다르다.
목적이 다르니 OLTP와 OLAP의 모델링에도 근본적인 차이가 존재한다.

앞으로 우리는 OLTP와 OLAP 두 영역에서 데이터 모델은 쓰임새, 목적, 가치가 다름을 의식하고 어떤 목적으로 모델링해야할지 알아봐야한다.

![](https://images.velog.io/images/minj9_6/post/28c64e89-d49b-4cc3-a0fd-d44713cd9162/image.png)

1> OLTP는 비즈니스 트랜잭션의 원활한 처리를 최우선으로 한다. 빈번한 거래 데이터의 입력, 수정, 삭제 과정에서의 효율성 즉 효과적인 갱신이 주요 목표다.
RDB에서 테이블들을 정규화하는 이유는 데이터 갱신을 효율적으로 처리하기 위해서라 할 수 있다.
정규화를 하면 데이터가 함수적 종속성에 기반하여 집약되므로 중복은 최소화되며 무결성은 극대화된다.
OLTP 모델은 엔터티 사이의 관계, 데이터 발생의 전제, 선행 규칙이 최대한 표현되어야한다.
요약하면 OLTP 운영 데이터의 관리 단위는 정규화된 테이블이며, 그 데이터는 실시간은 입력, 수정, 삭제된다고 전제한다.

2> 반면 OLAP에선 거래 데이터를 기초로 하여 효과적으로 분석하고 조회하는 것이 주된 관심사다.
OLTP의 데이터 관리 단위가 정규화된 테이블이라면 OLAP에서는 분석과 집계를 위한 관련 데이터들의 묶음이 그 단위가된다.
즉, 통합된 연관 정보가 효과적인 분석, 조회를 위해 구조화되어야한다. OLAP 영역의 데이터는 갱신에서 무척 자유롭고
정기적으로 적재되고 갱신되는 OLTP 데이터를 기초로 분석 관점에서 통합된 정보를 빠르게 제공할 수 있게 모델링되어야한다.

이처럼 OLTP와 OLAP은 근본적인 목적이 다르므로 데이터 모델링 역시 다르게 접근해야하고 OLTP는 정규화 중심, OLAP은 분석 집계 관점 디멘션을 중심으로 모델링해야한다

OLAP은 데이터 소비자가 조회와 분석을 잘 할 수 있도록 데이터를 정제해서 저장하는 곳이어야한다, 따라서 OLAP 영역 설계는 데이터 소비자에 맞춰야하며
이는 어떤 기준과 경로로 접근하고 분석해도 일정 수준의 성능을 보장해야함아르 의미한다.
OLAP의 데이터 모델은 OLTP 데이터 모델보다 정규화가 덜 된 형태일 수 있다.

### \*💡conclusion

OLTP 영역을 구성하는 모델이 관계형 데이터 모델
OLAP 영역을 구성하는 모델은 다차원 모델이다.
비즈니스 트랙잭션 처리를 위해 정규화 이론에 기반한 RDB 모델의 관점에서 모델링을 공부
