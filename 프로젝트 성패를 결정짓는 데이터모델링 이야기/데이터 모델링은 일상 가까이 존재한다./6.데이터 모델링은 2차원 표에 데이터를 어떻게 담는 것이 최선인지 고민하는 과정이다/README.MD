# Chapter 6: 데이터 모델링은 2차원 표에 데이터를 어떻게 담는 것이 최선인지 고민하는 과정이다

## 📌 데이터 독립성과 데이터 모델링의 실질적 정의

- 데이터 모델링은 모델을 만드는 행위 또는 만드는 과정에 관계된 모든 것을 의미한다.

#### 모델이란 무엇일까? 데이터 모델은 왜 만들어야하는 걸까?

#### 📚 1> 모델

> - 모델을 우리말도 변역하면 **모형**, 이는 사전적 의미 그대로 **실물**을 모방하여 간단하게 만든 물건을 의미한다.

- 우리는 데이터라는 콘텐츠를 담을 그릇이 필요한 것이며, 이 그릇을 IT스럽게 이야기 하면 구조 정도로 표현할 수 있으니 실물은 결국 **데이터의 저장 구조**가 된다.
  => 따라서 우리가 만드는 모델 = **데이터가 최종적으로 저장되는 구조**를 네모 박스와 선으로 그린 그림

#### 📚 ANSI/SPARC의 3단계 데이터 독립성 스키마 구조에 대해

- **데이터 독립성**의 개념은 데이터베이스의 근간이 되는 사상이다.
- 외부, 개념, 그리고 내부의 데이터 계층에 대한 이해가 부족하면 외부 스키마를 개념 스키마 계층에 생성하는 등 데이터 통합성을 저해하고 중복 데이터를 양상하는 실수를 범한다.

![](https://images.velog.io/images/minj9_6/post/66b02346-9a88-423f-9875-9e7810ce05dd/image.png)

- 그림에서 내부 스키마의 아래쪽은 복잡해서 완전히 이해하여 설계와 구현에 반영하기 쉽지않다.
- 오라클과 같은 DBMS는 데이터 독립성을 유지하고 과도한 복잡성을 숨기기 위해 한 단계(계층) 더 추상화된 내부 스키마를 제공한다.

#### 데이터 독립성 모델의 의미를 정리해보자.

> - 외부 스키마: 3단계 스키마 구조의 최상단 최부 스키마는 사용자 개개인이 보고자 하는 정보관점의 스키마이다. 테이블을 조인하여 원하는 집합을 만들어 보여주는 뷰가 이에 해당한다.

- 개념 스키마: 개별 사용자 관점을 데이터 관점 혹은 데이터 유형으로 통합한 뷰, 논리 데이터 모델이 이 계층에 위치한다.
- 내부 스키마: 데이터가 저장되는 스키마 구조로 테이블 수준의 물리 데이터를 의미하지만 통사적으로 물리데이터 모델과 그 이하 OS 수준에서의 저장 구조가지 포함된다.

#### <정리>

> 외부스키마 : 사용자 개개인이 보고자 하는 정보 단위의 뷰. 테이블을 조인하여 보여주는 집합
> 개념스키마 : 개별 사용자 관점을 데이터 관점 혹은 데이터 유형으로 통합한 뷰, 논리데이터의 모델
> 내부스키마 : 데이터가 저장되는 스키마 구조, 테이블 수준의 물리모델 (RDB는 2차원의 표라고 생각하면 됨), 통상적으로는 물리데이터 모델과 저장구조까지 포함.

#### 주의할 점, 우리의 주요 관심 영역은 바로 '개념 스키마'이이며 개념 스키마는 외부 스키마와 독립적인 계층이다.

=> 따라서 데이터 독립성의 가치를 정확히 이해하고, 데이터 독립성을 해치지 않도록 개념 스키마에 근건해서 모델링해야한다.
=> 당연히 개념스키마가 외부스키마보다 데이터 본질에 가깝다.

> 어떤 데이터를 어떻게 관리할 지 2차원 테이블의 관점으로 생각하는 것이 모델링
> 여기서 어떻게 담는 것이 최적인지는 상황에 따라 달라지며 표에 담긴 하나의 행이 하나의 **개체**이며 이러한 개체들을 구성 요소로 갖는 집합이 바로 **엔터티**이다.

## 📌 개념 모델, 논리 모델, 물리 모델, 그리고 현실적인 논리 모델

#### 📚 데이터 모델을 보는 3가지 관점, 개념/논리/물리 모델에 대해

1> 개념 모델 - 모델을 상세화하기 전에 주요 엔터티를 정의하고, 엔터티의 주 식별자와 주요 속성까지 도출하여 엔터티 간의 관계까지 정리한 수준의 모델을 의미한다.
품질 좋은 논리 모델을 만들어내기 위해 반드시 거쳐하는 상태이다.
주의, 개념모델은 개괄적이고 추상적인 모델이 아니다.
2> 논리 모델 - 개념에 살을 붙여 더 상세화한 것이다. 주요 엔터니 뿐만 아니라 모든 엔터티와 개별 엔터티의 속성이 모두 도출된 구체적이고 정규화된 모델이다.
3> 물리 모델 - DBMS가 데이터를 담는 논리적인 구조이다. DBMS 덕분에 테이블 형태로 구조를 인식하고 사용한다.

DBMS는 대량의 데이터를 효율적으로 관리하기 위해 내부에 고도로 최적화된 독자적인 형태로 데이터를 저장한다.

#### <정리>

> 개념모델 = 주요 엔터티(주 식별자, 주요 속성)을 도출, 엔터티 간의 관계를 정의한 모델
> 논리모델 = 개념 모델을 상세화하여 모든 엔터티와 엔터티별 속성을 도출, 정보 요구사항을 인간이 이해하기 적합한 수준으로 그 구조를 정의하고 정규화한 모델
> 물리모델 = RDB는 구조를 테이블 형태로 인식. 성능 등 현실적인 요소를 고려하는 모델

#### 📚 현실적인 논리 모델은 어떤 모델이 되어야할까?

1. 논리 모델은 데이터 독립성 스키마 중 '개념스키마'에 집중하는 단계이다

2. 데이터 모델의 전체 구조를 결정짓는 주요 엔터티 관련된 모든 결정은 논리 모델 단계에서 해야한다

3. 속성의 데이터 타입은 논리 모델 단계에서 정의하는 것이 바람직하다.

4. 논리 모델은 '인간'이 이해하기 적합한 수준으로 데이터를 보고 관리하는 관점이다. 이 관점은 정규화 이론을 기반으로 데이터 중복을 최소화하면서 무결성을 극대화하는 관점이다.

5. 현실적인 논리 모델은 사람이 이해하기 가장 쉬우면서 가능한 한 테이블과 유사한 형태의 모델이어야한다.

#### 한 줄 요약

현실적인 논리모델은 정보 요규사항을 데이터 관점에서 사람이 이해하기 쉬우면서, 가능한 한 테이블과 유사한 형태로 만드는 모델이다.

## 📌 데이터 모델링 마인드

<모든 속성을 한 테이블로 모은 주문서 엔터티의 문제점>

> 1. 주문서에 포함된 상품의 이름이 바뀌면 해당 상품과 관련된 주문서를 모두 찾아서 상품명을 수정해야한다.
> 2. 주문을 단 한 번도 하지 않은 고객은 관리자체가 불가능하다. 주문을 해야 주문서를 통해 주문 고객의 정보가 들어올 수 있는 구조이기에
> 3. 주문한 상품을 배송하려면 앱은 <주문배송주소>데이터를 참조해야하는데 불필요한 다른 속성들 때문에 대량 주문 처리 시스템 성능에 악영향을 줄 수 있다.

<정보의 집합과 분할 측면에서 테이블이 분리되지 않고 하나의 테이블 존재할 때 문제점>

> 1.  서로 다른 트랜잭션이 동일한 블록을 읽고 쓰려하기 때문에 경락과 락이 발생하면서 업무가 지연된다.

- 데이터 모델링은 앞의 첫째 둘째 문제점에 언급한 데이터 이상 현상이 발생하지 않도록, 정상적으로 관리할 수 있도록 데이터의 저장 구조를 모델로 도식화하는 과정이다.
- 데이터베이스가 최상의 성능을 내도록 구조를 도출해야기에 단순히 데이터의 저장 구조를 그려내는 것이 아니다.

#### 업무의 유형, 데이터 사이의 종속성, 업무 처리 방식 등을 고려하여 테이블으 쪼개는 것이 다름 아닌 데이터 정규화다.

`"최조 사용자가 보는 UI 수준의 뷰에서 데이터의 관련성을 중심으로 정보를 분리하는 것, 이러한 사고방식과 안목을 길러야한다."`

### \*💡conclusion

> - 데이터 모델링은 2차원 표에 데이터를 어떻게 담는 것이 최적인지, 그 구조를 고민하는 과정이다.

- 또한 데이터 모델링은 단순히 도식화된 모형이 아닌 데이터베이스가 최고의 성능을 낼 수 있는 구조여야한다.
- 정규화는 이에 대한 궁극의 기반 이론이다.
