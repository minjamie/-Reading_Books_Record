# 3장 정리 - this

13장 정리 - this

자바스크립트 this 어디서든 사용

상황에 따라 this 바라보는 대상 다름

this 실질적 함수, 객체 구분하는 유일 기능

1. this 상황 별 어떻게 다른지
2. 왜 그런지
3. 예상과 다른 대상 바라 볼 시 효과적으로 추적하는 방법

---

1. **상황에 따라 달라지는 this**
- this는 함수 호출 할 때 결정
- 함수를 어떤 방식으로 호출하느냐에 따라 값이 달라짐

1_1. 전역공간 this

전역 공간에선 this는 전역 객체 가리킴

전역 객체는 자바스크립트 런타임 환경에 따라 이름, 정보 다름

브라우저 환경에선 window, Node.js에선 global

자바스크립트 모든 변수 특정 객체의 프로퍼티로 동작

1_2.  메서드로서 호출할 때 그 메서드 내부에서의 this

함수와 메서드

함수와 메서드는 미리 정의한 동작을 수행하는 코드 뭉치로, 둘을 구분하는 유일한 차이는 **독립성**

1.3 함수로서 호출 시 그 함수 내부에서 this

함수 내부에서 this

함수를 함수로서 호출 시 this는 전역 객체를 가리키
메

메서드 내부에서 this

내부 함수 역시 이를 함수로서 호출했는지 메서드로 호출했는지 파악하면 this값 정확히 맞춤

this 바인딩하지 않은 함수

화살표함수는 실행 컨텍스트 생성시 this 바인딩 과정 빠지고 상위 스코프 this그대로 활용

1.4 콜백 함수 호출 시 함수 내부 this

콜백함수 ? 함수 a 제어권을 다른 함수 (또는 메서드) b 에게 넘겨주는 함수 a 

콜백함수의 제어권 가지는 함수가 콜백함수 this를 무엇으로 할지 결정하며 

특별히 정의되지 않은 겨우 기본적으로 함수와 마찬가지로 전역 객체 바라봄

1.5 생성자 함수 내부 this

생성자 함수? 어떤 공통된 성질 지니는 객체 생성하는데 사용하는 함수

어떤 함수 생성자 함수로서 호출 될 경우 내부에서 this는 새로 만들 구체적인 인스턴스 자신

1. 명시적으로 this 바인딩하는 방법

call

apply 

call,apply는 명시적으로 별도 this 바인딩하면서 함수 메서드 실행 하는 방법이지만 이로인해 this 예측 어렵게 만들어 코드해석 방해 단점

유사배열 객체에 배열 메서드 적용 시 활용

bind - call과 비슷 호출하지 않고 넘겨받은 this및 인수들 바탕으로 새로운 함수 반환 메서드

함수에 this 미리 적용하는 것과 부분 적용 함수 구현 2가지 목

name 프로퍼티에 boundxx 가 붙어 기존 call, apply보다 코드 추적 수월

생성자 내부에서 다른 생성자 호출

생성자 내부에 다른 생성자와 공통된 내용 있을 경우 call 또는 apply 이용해 다른 생성자 호출하면 간단하게 반복 줄임

상위 컨텍스트 this 내부함수나 콜백 함수에 전달

함수 메서드에 bind 메서드 이용 this 값 사용자 입맛에 맞게 바꾸기 가능

화살표 함수 예외사항

화살표 함수는 실행 컨텍스트 생성시 this 바인딩 과정 제외

함수 내부에 tihs 없으며 접근하고자 하면 스코프체인상 가장가까운 this에 접

별도 인자로 this 받는 경우(콜백 함수 내에서 this)

thisArg 값 지정하면 콜백 함수 내부 this 값 원하는 대로 변경

내부 요소에 대해 같은 동작 반복 수행해야하는 배열 메서드 포진

Set,Map등 메서드에도 일부 존재